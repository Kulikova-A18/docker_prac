# 2. Работа с изолироваными средами в linux

## Предисловие

Вы — команда специалистов по информационной безопасности, привлечённая для анализа инцидента. У вас в распоряжении есть изолированный стенд, состоящий из двух контейнеров:

- один — фреймворк на базе Spring (возможно, с уязвимостью),
- второй — клиент, который периодически взаимодействует с первым.

Это всё, что вам должно быть известно. Исходный код, внутренняя логика и конфигурации недоступны — вы работаете по модели black-box.

Вы должны провести полевое расследование: выявить, что происходит внутри системы, отличить нормальную активность от подозрительной, и подготовить формализованный отчёт о поведении системы.

## В вашем распоряжении

Доступ к хосту, на котором запущены оба контейнера.

Возможность использовать:
- `bpftrace` для отслеживания системных вызовов,
- `tcpdump` или `tshark` для анализа сетевого трафика,
- `syslog` (логи, генерируемые контейнерами),
- стандартные средства Linux (`netstat`, `ps`, `top`, `docker logs`, `journalctl` и т.д.).

## Что нужно сделать

### Провести наблюдение за работой системы в течение 10 минут.

- Какие процессы запускаются?
- Какие системные вызовы происходят?
- Какие IP-адреса, порты, протоколы задействованы?
- Какие признаки могут указывать на атаку или злоумышленное поведение?

### Собрать данные:
- Снимки сетевой активности (через `tcpdump`/`wireshark`).
- Системные вызовы (`bpftrace`, фильтрация по `PID`/контейнеру).
- Логи из `syslog`.

### Оформить CSV-датасет:

1. Срез за 10 минут активного наблюдения.

2. Каждая запись — отдельное событие, информация должна содержать:
    - Время события,
    - Тип события (системный вызов / сетевой пакет / лог),
    - Источник (IP / контейнер / PID),
    - Описание действия (например, execve curl, tcp connect to 8080, GET /exploit, и т.д.),
    - Классификацию: норма (0) / подозрительная активность (1).

Сэмпл финального лога:

```csv
timestamp,source,event_type,details,classification
2025-06-23 12:02:33,client,syscall,execve /usr/bin/curl http://10.10.0.2:8080/exploit,1
```

### Написать краткий отчёт:

`REPORT_TEMPLATE.md`

## На что обратить внимание

- Есть ли странные запросы из клиента?
- Используется ли curl, wget, bash, sh внутри контейнеров?
- Появляются ли подключения к нестандартным адресам?
- Выполняются ли команды в обход обычного приложения?

## Развертка

1. Установить [docker](https://docs.docker.com/engine/install/ubuntu/). Установить git, если не установлен.
2. `git clone https://github.com/frizzymonsta/docker_prac && cd docker_prac`
3. `docker compose up -d`

При `docker ps` будут поднятые контейнеры.

Отправлять на `zelichenok@comsec.spb.ru`.